### Java Script가 동작하는 원리 - light version

웹 브라우저 안에는 `stack` 이라는 공간이 있음 여기서 코드를 한줄 한줄 실행해줌

이렇게 실행 하다가 변수를 만나면 변수에 값을 넣고 싶어하는데 옆에 `Heap` 이라는 공간이 있는데 거기서 변수를 끄집어다가 쓴다.

`stack` 은 오로지 하나만 존재한다. 그래서 한번에 코드를 한줄밖에 실행하지 못한다. (이것을 전문용어로 `싱글 스레드`라고 한다.)

---

`setTimeout()` 과 같은 바로 실행할 수 없는 함수는 `stack` 에 둘수없으니 잠깐 대기실에 놔두고 나중에 실행한다고 생각하면 된다.

대기실 보내놓는 코드들은 정해져 있다.

- Ajax

- eventListener
- setTimeout 등

setTimeout 이 끝나면 다시 `stack` 에 이동해야 한다. 그런데 여기서 그냥 옮기는게 아니라 `queue` 라는 대기실에 줄을 세운다. 그 다음에 여기서 `stack` 하나씩 올린다고 생각하면 된다.

근데 여기서 조건이 있는데 `stack` 이 텅 비었을때만 이렇게 작동한다고 생각하면 된다.

---

근데 여기서 우리가 응용해서 생각해볼것이 있다.

js로 우리가 반복문을 수억번 돌리고 10초 나 걸리는 연산을 시켰다고 가정해보자 이때 위에서 말했던 대기실로 이동되는 코드를 실행하려면 작동이 안되는데 이유는 당연히 아까도 말했듯이 대기실 -> queue -> stack으로 보내려면 `stack`이 비워져야만 실행이 되기 때문이다. 보통 브라우저 프리징의 원인이 된다.

js는 원래 동기적인 언어인데 아까 말했던 대기실에 보내놓는 코드들을 쓸때 js는 비동기적인 처리가 가능하다.
